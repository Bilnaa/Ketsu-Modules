{
  "moduleInfo": {
    "moduleName": "Drama Cool",
    "moduleInitials": "DC",
    "moduleDesc": "Ketsu module to access Data from Drama Cool",
    "developer": "ナビル",
    "moduleID": "2849626",
    "moduleImage": "https://yt3.ggpht.com/a-/AAuE7mAW2MBlo2Dg0vVQBmQTl8ex6dhwNZHmObqHwQ=s900-mo-c-c0xffffffff-rj-k-no",
    "moduleVersion": 2.6,
    "moduleLenguage": "ENG",
    "moduleType": "Video",
    "changelog": "2.6 - EVERYTHING FINALLY WORKS",
    "baseURL": "https://www.dramacool.sk/",
    "moduleDeveloperSite": "https://bilnaa.github.io/main",
    "UpdateSite": "https://raw.githubusercontent.com/Bilnaa/bilnaa.github.io/main/Drama_Cool/moduleTemplate.json",
    "preferedServer": "ASIANEMBED",
    "preferedDownloadServer": "ASIANEMBED",
    "blackListed": [""]
  },
  "global": {
    "variables": [{
      "key": "",
      "value": ""
    }],
    "cookies": [{
      "key": "",
      "value": ""
    }],
    "headers": [{
      "key": "",
      "value": ""
    }]
  },
  "mainPage": [{
    "request": {
      "url": "https://dramacool.sk/most-popular-drama",
      "method": "get",
      "headers": [{
        "key": "",
        "value": ""
      }],
      "httpBody": null
    },
    "extra": {
      "commands": [{
        "commandName": "",
        "params": [{
          "key": "",
          "value": ""
        }]
      }],
      "extraInfo": [{
        "key": "",
        "value": ""
      }]
    },
    "javascriptConfig": {
      "removeJavascript": true,
      "loadInWebView": false,
      "javaScript": " const DefaultLayouts = { ultraWideFull : 'ultraWideFull', ultraWide : 'ultraWide', wideFull : 'wideFull', wide : 'wide', wideStrechedFull : 'wideStrechedFull', wideStrechedFullDouble : 'WideStrechedFullDouble', wideStreched : 'wideStreched', wideStrechedDouble : 'wideStrechedDouble', wideStrechedFullList : 'wideStrechedFullList', wideStrechedList : 'wideStrechedList', doublets : 'doublets', doubletsDouble : 'doubletsDouble', doubletsFull : 'doubletsFull', doubletsFullDouble : 'doubletsFullDouble', doubletsConstant : 'doubletsConstant', doubletsDoubleConstant : 'doubletsDoubleConstant', doubletsFullConstant : 'doubletsFullConstant', doubletsFullDoubleConstant : 'doubletsFullDoubleConstant', longDoublets : 'longDoublets', longDoubletsDouble : 'longDoubletsDouble', longDoubletsFull : 'longDoubletsFull', longDoubletsFullDouble : 'longDoubletsFullDouble', longDoubletsConstant : 'longDoubletsConstant', longDoubletsDoubleConstant : 'longDoubletsDoubleConstant', longDoubletsFullConstant : 'longDoubletsFullConstant', longDoubletsFullDoubleConstant : 'longDoubletsFullDoubleConstant', triplets : 'triplets', tripletsDouble : 'tripletsDouble', tripletsFull : 'tripletsFull', tripletsFullDouble : 'tripletsFullDouble', tripletsConstant : 'tripletsConstant', tripletsDoubleConstant : 'tripletsDoubleConstant', tripletsFullConstant : 'tripletsFullConstant', tripletsFullDoubleConstant : 'tripletsFullDoubleConstant', longTriplets : 'longTriplets', longTripletsDouble : 'longTripletsDouble', longTripletsFull : 'longTripletsFull', longTripletsFullDouble : 'longTripletsFullDouble', longTripletsConstant : 'longTripletsConstant', longTripletsDoubleConstant : 'longTripletsDoubleConstant', longTripletsFullConstant : 'longTripletsFullConstant', longTripletsFullDoubleConstant : 'longTripletsFullDoubleConstant', none: '' }; const CellDesings = { Special1 : 'Special1', Special2 : 'Special2', Special3 : 'Special3', CELLHelperText : 'CELLHelperText', small1 : 'small1', small2 : 'small2', normal1 : 'normal1', normal2 : 'normal2', normal3 : 'normal3', normal4 : 'normal4', normal5 : 'normal5', normal6 : 'normal6', normal7 : 'normal7', wide1 : 'wide1', wide2 : 'wide2', wide3 : 'wide3', wide4 : 'wide4', wide5 : 'wide5', wide6 : 'wide6', wide7 : 'wide7', wide8 : 'wide8', wide9 : 'wide9', wide10 : 'wide10', wide11 : 'wide11' }; const Paging = { leading : 'leading', centered : 'centered', none : '' }; const Orientation = { horizontal : 'horizontal', vertical : 'vertical' }; function MainPage(request, extra, javascriptConfig, output) { this.request = request; this.extra = extra; this.javascriptConfig = javascriptConfig; this.output = output; } function ModuleRequest(url, method, headers, httpBody) { this.url = url; this.method = method; this.headers = headers; this.httpBody = httpBody; } function Extra(commands, extraInfo) { this.commands = commands; this.extraInfo = extraInfo; } function Commands(commandName, params) { this.commandName = commandName; this.params = params; } function JavascriptConfig(removeJavascript, loadInWebView, javaScript) { this.removeJavascript = removeJavascript; this.loadInWebView = loadInWebView; this.javaScript = javaScript; } function KeyValue(key, value) { this.key = key; this.value = value; } function Output(cellDesing, orientation, defaultLayout, paging, section, layout, data) { this.cellDesing = cellDesing; this.orientation = orientation; this.defaultLayout = defaultLayout; this.paging = paging; this.section = section; this.layout = layout; this.data = data; } function Section(sectionName, separator) { this.sectionName = sectionName; this.separator = separator; } function Layout(insets, visibleCellsWidthS,visibleCellsWidthM,visibleCellsWidthL, visibleCellsHeight, heightForVisibleCells, cellSize, ratio, constant, horizontalSpacing, verticalSpacing) { this.insets = insets; this.visibleCellsWidthS = visibleCellsWidthS; this.visibleCellsWidthM = visibleCellsWidthM; this.visibleCellsWidthL = visibleCellsWidthL; this.visibleCellsHeight = visibleCellsHeight; this.heightForVisibleCells = heightForVisibleCells; this.cellSize = cellSize; this.ratio = ratio; this.constant = constant; this.horizontalSpacing = horizontalSpacing; this.verticalSpacing = verticalSpacing; } function Insets(top, bottom, left, right) { this.top = top; this.bottom = bottom; this.left = left; this.right = right; } function Size(width, height) { this.width = width; this.height = height; } function Ratio(inRelation, number1, number2) { this.inRelation = inRelation; this.number1 = number1; this.number2 = number2; } function Data(image, title, description, field1, field2, field3, field4, isChapter, link,openInWebView) { this.image = image; this.title = title; this.description = description; this.field1 = field1; this.field2 = field2; this.field3 = field3; this.field4 = field4; this.isChapter = isChapter; this.link = link; this.openInWebView = openInWebView; } function quickData(link,image,title,field1) { return new Data(image,title,'unknown',field1,'unknown','unknown','unknown',false,link); } function shuffle(a) { var j, x, i; for (i = a.length - 1; i > 0; i--) { j = Math.floor(Math.random() * (i + 1)); x = a[i]; a[i] = a[j]; a[j] = x; } return a; } var savedData = document.getElementById('ketsu-final-data'); var parsedJson = JSON.parse(savedData.innerHTML); let output = []; let emptyKeyValue = [new KeyValue('','')]; var baseURL = 'https://dramacool.sk/'; var dataArray = []; films = document.querySelector('.switch-block.list-episode-item').querySelectorAll('li'); for(var x = 0; x < films.length; x++) { let list = films[x]; let title = list.querySelector('a').title; var link = baseURL + list.querySelector('a').href; link = new ModuleRequest(link, 'get', emptyKeyValue, null); var image = list.querySelector('img').dataset.original; image = new ModuleRequest(image, 'get', emptyKeyValue, null); var finalData = new Data(image, title, 'unknown', '', 'unknown', 'unknown', 'unknown', false, link); dataArray.push(finalData); } output.push(new Output(CellDesings.normal2,Orientation.vertical,DefaultLayouts.longDoubletsFullConstant,Paging.leading, new Section('Drama', true), null, dataArray)); let MainPageObject = new MainPage(new ModuleRequest('','get',emptyKeyValue,null),new Extra([new Commands('',emptyKeyValue)],emptyKeyValue),new JavascriptConfig(true,false,''),output); var finalJson = JSON.stringify(MainPageObject); savedData.innerHTML = finalJson;"
    },
    "output": [{
      "cellDesing": "normal1",
      "orientation": "vertical",
      "defaultLayout": "wide",
      "paging": "",
      "section": {
        "sectionName": "",
        "separator": false
      },
      "layout": {
        "insets": {
          "top": 0,
          "bottom": 0,
          "left": 0,
          "right": 0
        },
        "visibleCellsWidthS": 2,
        "visibleCellsWidthM": 2,
        "visibleCellsWidthL": 2,
        "visibleCellsHeight": 2,
        "heightForVisibleCells": 400,
        "cellSize": {
          "width": 300,
          "height": 300
        },
        "ratio": {
          "inRelation": "width",
          "number1": 1,
          "number2": 2
        },
        "constant": {
          "width": 1,
          "height": 2
        },
        "horizontalSpacing": 0,
        "verticalSpacing": 0
      },
      "data": [{
        "image": {
          "url": "",
          "method": "get",
          "headers": [{
            "key": "",
            "value": ""
          }],
          "httpBody": null
        },
        "title": "",
        "description": "",
        "field1": "",
        "field2": "",
        "field3": "",
        "field4": "",
        "openInWebView": false,
        "isChapter": false,
        "link": {
          "url": "",
          "method": "",
          "headers": [{
            "key": "",
            "value": ""
          }],
          "httpBody": null
        }
      }]
    }]
  }],
  "search": [{
    "request": {
      "url": "https://dramacool.sk/search?type=movies&keyword=<searched>&page=<page>",
      "method": "get",
      "headers": [{
        "key": "",
        "value": ""
      }],
      "httpBody": null
    },
    "separator": "%20",
    "extra": {
      "commands": [{
        "commandName": "",
        "params": [{
          "key": "",
          "value": ""
        }]
      }],
      "extraInfo": [{
        "key": "",
        "value": ""
      }]
    },
    "javascriptConfig": {
      "removeJavascript": true,
      "loadInWebView": false,
      "javaScript": " const DefaultLayouts = { ultraWideFull : 'ultraWideFull', ultraWide : 'ultraWide', wideFull : 'wideFull', wide : 'wide', wideStrechedFull : 'wideStrechedFull', wideStrechedFullDouble : 'WideStrechedFullDouble', wideStreched : 'wideStreched', wideStrechedDouble : 'wideStrechedDouble', wideStrechedFullList : 'wideStrechedFullList', wideStrechedList : 'wideStrechedList', doublets : 'doublets', doubletsDouble : 'doubletsDouble', doubletsFull : 'doubletsFull', doubletsFullDouble : 'doubletsFullDouble', doubletsConstant : 'doubletsConstant', doubletsDoubleConstant : 'doubletsDoubleConstant', doubletsFullConstant : 'doubletsFullConstant', doubletsFullDoubleConstant : 'doubletsFullDoubleConstant', longDoublets : 'longDoublets', longDoubletsDouble : 'longDoubletsDouble', longDoubletsFull : 'longDoubletsFull', longDoubletsFullDouble : 'longDoubletsFullDouble', longDoubletsConstant : 'longDoubletsConstant', longDoubletsDoubleConstant : 'longDoubletsDoubleConstant', longDoubletsFullConstant : 'longDoubletsFullConstant', longDoubletsFullDoubleConstant : 'longDoubletsFullDoubleConstant', triplets : 'triplets', tripletsDouble : 'tripletsDouble', tripletsFull : 'tripletsFull', tripletsFullDouble : 'tripletsFullDouble', tripletsConstant : 'tripletsConstant', tripletsDoubleConstant : 'tripletsDoubleConstant', tripletsFullConstant : 'tripletsFullConstant', tripletsFullDoubleConstant : 'tripletsFullDoubleConstant', longTriplets : 'longTriplets', longTripletsDouble : 'longTripletsDouble', longTripletsFull : 'longTripletsFull', longTripletsFullDouble : 'longTripletsFullDouble', longTripletsConstant : 'longTripletsConstant', longTripletsDoubleConstant : 'longTripletsDoubleConstant', longTripletsFullConstant : 'longTripletsFullConstant', longTripletsFullDoubleConstant : 'longTripletsFullDoubleConstant', none: '' }; const CellDesings = { Special1 : 'Special1', Special2 : 'Special2', Special3 : 'Special3', CELLHelperText : 'CELLHelperText', small1 : 'small1', small2 : 'small2', normal1 : 'normal1', normal2 : 'normal2', normal3 : 'normal3', normal4 : 'normal4', normal5 : 'normal5', normal6 : 'normal6', normal7 : 'normal7', wide1 : 'wide1', wide2 : 'wide2', wide3 : 'wide3', wide4 : 'wide4', wide5 : 'wide5', wide6 : 'wide6', wide7 : 'wide7', wide8 : 'wide8', wide9 : 'wide9', wide10 : 'wide10', wide11 : 'wide11' }; const Paging = { leading : 'leading', centered : 'centered', none : '' }; const Orientation = { horizontal : 'horizontal', vertical : 'vertical' }; function Search(request,extra,separator,javascriptConfig,output) { this.request = request; this.extra = extra; this.separator = separator; this.javascriptConfig = javascriptConfig; this.output = output; } function ModuleRequest(url,method,headers,httpBody) { this.url = url; this.method = method; this.headers = headers; this.httpBody = httpBody; } function Extra(commands,extraInfo) { this.commands = commands; this.extraInfo = extraInfo; } function Commands(commandName,params) { this.commandName = commandName; this.params = params; } function JavascriptConfig(removeJavascript,loadInWebView,javaScript) { this.removeJavascript = removeJavascript; this.loadInWebView = loadInWebView; this.javaScript = javaScript; } function KeyValue(key,value) { this.key = key; this.value = value; } function Output(cellDesing,orientation,defaultLayout,paging,section,layout,data) { this.cellDesing = cellDesing; this.orientation = orientation; this.defaultLayout = defaultLayout; this.paging = paging; this.section = section; this.layout = layout; this.data = data; } function Section(sectionName,separator) { this.sectionName = sectionName; this.separator = separator; } function Layout(insets, visibleCellsWidthS,visibleCellsWidthM,visibleCellsWidthL, visibleCellsHeight, heightForVisibleCells, cellSize, ratio, constant, horizontalSpacing, verticalSpacing) { this.insets = insets; this.visibleCellsWidthS = visibleCellsWidthS; this.visibleCellsWidthM = visibleCellsWidthM; this.visibleCellsWidthL = visibleCellsWidthL; this.visibleCellsHeight = visibleCellsHeight; this.heightForVisibleCells = heightForVisibleCells; this.cellSize = cellSize; this.ratio = ratio; this.constant = constant; this.horizontalSpacing = horizontalSpacing; this.verticalSpacing = verticalSpacing; } function Insets(top,bottom,left,right) { this.top = top; this.bottom = bottom; this.left = left; this.right = right; } function Size(width,height) { this.width = width; this.height = height; } function Ratio(inRelation,number1,number2) { this.inRelation = inRelation; this.number1 = number1; this.number2 = number2; } function Data(image,title,description,field1,field2,field3,field4,isChapter,link,openInWebView) { this.image = image; this.title = title; this.description = description; this.field1 = field1; this.field2 = field2; this.field3 = field3; this.field4 = field4; this.isChapter = isChapter; this.link = link; this.openInWebView = openInWebView; } function quickData(link,image,title,field1) { return new Data(image,title,'unknown',field1,'unknown','unknown','unknown',false,link); } function shuffle(a) { var j, x, i; for (i = a.length - 1; i > 0; i--) { j = Math.floor(Math.random() * (i + 1)); x = a[i]; a[i] = a[j]; a[j] = x; } return a; } var savedData = document.getElementById('ketsu-final-data'); var parsedJson = JSON.parse(savedData.innerHTML); let output = []; let emptyKeyValue = [new KeyValue('','')]; var baseURL = 'https://dramacool.sk/'; var lastAdded = document.querySelector('ul.switch-block.list-episode-item').querySelectorAll('li'); let lastAddedArray = []; for (var x = 0; x < lastAdded.length;x++) { try { let list = lastAdded[x]; let title = list.querySelector('a img').alt; var link = baseURL + list.querySelector('a').href; link = new ModuleRequest(link,'get',emptyKeyValue,null); var image = list.querySelector('a img').dataset.original; image = new ModuleRequest(image,'get',emptyKeyValue,null); var finalData = new Data(image,title,'','','Drama','unknown','unknown',false,link); lastAddedArray.push(finalData); } catch (e) {} } var testLayout = new Layout(new Insets(10,10,10,10),1,2,3,1,500,new Size(400,400),new Ratio('width',4,11),new Size(0,0),10,10); output.push(new Output(CellDesings.wide11,Orientation.vertical,DefaultLayouts.none,Paging.none,new Section('',false),testLayout,lastAddedArray));; let searchPageObject = new Search(new ModuleRequest('','',emptyKeyValue,null),new Extra([new Commands('',emptyKeyValue)],emptyKeyValue),'',new JavascriptConfig(true,false,''),output); var finalJson = JSON.stringify(searchPageObject); savedData.innerHTML = finalJson;"
    },
    "output": [{
      "cellDesing": "normal1",
      "orientation": "vertical",
      "defaultLayout": "wide",
      "paging": "",
      "section": {
        "sectionName": "",
        "separator": false
      },
      "layout": {
        "insets": {
          "top": 0,
          "bottom": 0,
          "left": 0,
          "right": 0
        },
        "visibleCellsWidthS": 2,
        "visibleCellsWidthM": 2,
        "visibleCellsWidthL": 2,
        "visibleCellsHeight": 2,
        "heightForVisibleCells": 400,
        "cellSize": {
          "width": 300,
          "height": 300
        },
        "ratio": {
          "inRelation": "width",
          "number1": 1,
          "number2": 2
        },
        "constant": {
          "width": 1,
          "height": 2
        },
        "horizontalSpacing": 0,
        "verticalSpacing": 0
      },
      "data": [{
        "image": {
          "url": "",
          "method": "get",
          "headers": [{
            "key": "",
            "value": ""
          }],
          "httpBody": null
        },
        "title": "",
        "description": "",
        "field1": "",
        "field2": "",
        "field3": "",
        "field4": "",
        "openInWebView": false,
        "isChapter": false,
        "link": {
          "url": "empty",
          "method": "get",
          "headers": [{
            "key": "key",
            "value": "value"
          }],
          "httpBody": null
        }
      }]
    }]
  }],
  "info": [{
    "request": {
      "url": "",
      "method": "get",
      "headers": [{
        "key": "",
        "value": ""
      }],
      "httpBody": null
    },
    "extra": {
      "commands": [{
        "commandName": "",
        "params": [{
          "key": "",
          "value": ""
        }]
      }],
      "extraInfo": [{
        "key": "",
        "value": ""
      }]
    },
    "javascriptConfig": {
      "removeJavascript": true,
      "loadInWebView": false,
      "javaScript": " function Info(request, extra, javascriptConfig, output) { this.request = request; this.extra = extra; this.javascriptConfig = javascriptConfig; this.output = output; } function ModuleRequest(url, method, headers, httpBody) { this.url = url; this.method = method; this.headers = headers; this.httpBody = httpBody; } function Extra(commands, extraInfo) { this.commands = commands; this.extraInfo = extraInfo; } function Commands(commandName, params) { this.commandName = commandName; this.params = params; } function JavascriptConfig(removeJavascript, loadInWebView, javaScript) { this.removeJavascript = removeJavascript; this.loadInWebView = loadInWebView; this.javaScript = javaScript; } function KeyValue(key, value) { this.key = key; this.value = value; } function Chapter(chapName, link, openInWebView) { this.chapName = chapName; this.link = link; this.openInWebView = openInWebView; } function Output(image, title, link, description, genres, field1, field2, field3, field4, chapters) { this.image = image; this.link = link; this.title = title; this.description = description; this.genres = genres; this.field1 = field1; this.field2 = field2; this.field3 = field3; this.field4 = field4; this.chapters = chapters; } function getStuff(array, match) { for (var x = 0; x < array.length; x++) { let data = array[x].textContent; if (data.includes(match)) { return data.replace(match, '').trim(); } } } function getHtmlStuff(array, match) { for (var x = 0; x < array.length; x++) { let data = array[x].textContent; if (data.includes(match)) { return array[x]; } } } var savedData = document.getElementById('ketsu-final-data'); var parsedJson = JSON.parse(savedData.innerHTML); let emptyKeyValue = [new KeyValue('', '')]; var baseURL = 'https://dramacool.ch/'; var episodes = []; var type = 'Drama'; var status = document.querySelector('.info').textContent.match(/Status: .+/g)[0].replace('Status: ', '').trim(); var lang = document.querySelector('.info').textContent.match(/Country: .+/g)[0].replace('Country: ', '').trim(); var genres = Array.from(document.querySelector('.info').textContent.match(/Genre: .+/g)[0].replace('Genre: ', '') .split(';')); var desc = ''; var title = document.querySelector('.info h1').textContent; var image = document.querySelector('.img img').src; image = new ModuleRequest(image, 'get', emptyKeyValue, null); var episode = document.querySelector('.list-episode-item-2.all-episode').querySelectorAll('li'); for (var i = episode.length - 1; i >= 0; i--) { var fixedLink = baseURL + episode[i].querySelector('a').href; let chapter = new Chapter('Episode ' + (episode.length - i), new ModuleRequest(fixedLink, 'get', emptyKeyValue, null), false); episodes.push(chapter); } try { desc = document.querySelector('.info').textContent.match(/ Depion: \\n \\n .+/g)[0].replace(' Depion: \\n \\n ', '') + '3'; } catch {} try { desc = document.querySelector('.info p:nth-of-type(n+4)').textContent, document.querySelector( '.info p:nth-of-type(n+5)').textContent; } catch {} try { desc = document.querySelector('.info').textContent.match(/Depion: \\n.+/g)[0].replace('Depion: \\n ', '') .trim(); } catch {} try { desc1 = document.querySelectorAll('.info p'); for (var i = 0; i < desc1.length; i++) { if (desc1[i].textContent.includes('Depion:')) { desc = desc1[i + 1].textContent.trim(); if (desc == '') { desc = desc1[i + 2].textContent.trim(); } } } } catch (e) {} let infoPageObject = new Info(new ModuleRequest('', '', emptyKeyValue, null), new Extra([new Commands('', emptyKeyValue)], emptyKeyValue), new JavascriptConfig(false, false, ''), new Output(image, title, parsedJson.request, desc, genres, lang + ' | ' + status, '', type, 'Eps: ' + episodes.length, episodes )); var finalJson = JSON.stringify(infoPageObject); savedData.innerHTML = finalJson;"
    },
    "output": {
      "image": {
        "url": "",
        "method": "get",
        "headers": [{
          "key": "",
          "value": ""
        }],
        "httpBody": null
      },
      "link": {
        "url": "",
        "method": "get",
        "headers": [{
          "key": "",
          "value": ""
        }],
        "httpBody": null
      },
      "title": "",
      "description": "",
      "genres": [""],
      "field1": "",
      "field2": "",
      "field3": "",
      "field4": "",
      "chapters": [{
        "chapName": "",
        "openInWebView": false,
        "link": {
          "url": "empty",
          "method": "get",
          "headers": [{
            "key": "key",
            "value": "value"
          }],
          "httpBody": null
        }
      }]
    }
  }],
  "chapters": [{
    "request": {
      "url": "",
      "method": "get",
      "headers": [{
        "key": "key",
        "value": "value"
      }],
      "httpBody": null
    },
    "extra": {
      "commands": [{
        "commandName": "",
        "params": [{
          "key": "",
          "value": ""
        }]
      }],
      "extraInfo": [{
        "key": "",
        "value": ""
      }]
    },
    "javascriptConfig": {
      "removeJavascript": true,
      "loadInWebView": false,
      "javaScript": "function Chapters(request, extra, javascriptConfig, output) {this.request = request;this.extra = extra;this.javascriptConfig = javascriptConfig;this.output = output;}function ModuleRequest(url, method, headers, httpBody) {this.url = url;this.method = method;this.headers = headers;this.httpBody = httpBody;}function Extra(commands, extraInfo) {this.commands = commands;this.extraInfo = extraInfo;}function Commands(commandName, params) {this.commandName = commandName;this.params = params;}function JavascriptConfig(removeJavascript, loadInWebView, javaScript) {this.removeJavascript = removeJavascript;this.loadInWebView = loadInWebView;this.javaScript = javaScript;}function KeyValue(key, value) {this.key = key;this.value = value;}function Output(videos, images, text) {this.videos = videos;this.images = images;this.text = text;}function Videos(needsResolver, rawVideo) {this.needsResolver = needsResolver;this.rawVideo = rawVideo;}function NeedsResolver(resolverIdentifier, link) {this.resolverIdentifier = resolverIdentifier;this.link = link;}function RawVideo(video) {this.video = video;}function Video(videoQuality, videoLink) {this.videoQuality = videoQuality;this.videoLink = videoLink;}function Text(text) {this.text = text;}var output = [];var savedData = document.getElementById('ketsu-final-data');var parsedJson = JSON.parse(savedData.innerHTML);var emptyKeyValue = [new KeyValue('', '')];var buttonBox = document.querySelector('div.anime_muti_link').querySelectorAll('li');for (var x = 0; x < buttonBox.length; x++) {var link = buttonBox[x].dataset.video;if (link.includes('streamtape')) {output.push(new NeedsResolver('', new ModuleRequest(link.replace('streamtape.com', 'streamta.pe'), 'get', emptyKeyValue, null)));}if (link.includes('sbplay')) {output.push(new NeedsResolver('', new ModuleRequest(link, 'get', emptyKeyValue, null)));}if (link.includes('asianembed')) {if (!link.includes('streaming.php')) {var fixedLink = 'https:' + link;output.push(new NeedsResolver('', new ModuleRequest(fixedLink, 'get', emptyKeyValue, null)));} else {output.push(new NeedsResolver('', new ModuleRequest('https:' + link, 'get', emptyKeyValue, null)));}} else {output.push(new NeedsResolver('', new ModuleRequest(link, 'get', emptyKeyValue, null)));}}if (output.length > 0) {for (var x = 0; x < output.length; x++) {if (output[x].link.url == '{' || output[x].link.url.includes('streamtape') || !output[x].link.url.includes('https') || output[x].link.url.includes('dood') || (output[x].link.url.includes('sbplay2') && output[x].resolverIdentifier == '')) {output.splice(x, 1);}}for (var y = 0; y < output.length; y++) {if (output[y].link.url == '{') {output.splice(y, 1);}}}let emptyExtra = new Extra([new Commands('', emptyKeyValue)], emptyKeyValue);var chaptersObject = new Chapters(new ModuleRequest('', '', emptyKeyValue, null), emptyExtra, new JavascriptConfig(false, false, ''), new Output(new Videos(output, null), null, null));var finalJson = JSON.stringify(chaptersObject);savedData.innerHTML = finalJson;"
    },
    "output": {
      "videos": {
        "needsResolver": [{
          "resolverIdentifier": "",
          "link": {
            "url": "",
            "method": "get",
            "headers": [{
              "key": "key",
              "value": "value"
            }],
            "httpBody": null
          }
        }],
        "rawVideo": [{
          "video": [{
            "videoQuality": "",
            "videoLink": {
              "url": "http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4",
              "method": "get",
              "headers": [{
                "key": "key",
                "value": "value"
              }],
              "httpBody": null
            }
          }]
        }]
      },
      "images": [{
        "url": "empty",
        "method": "get",
        "headers": [{
          "key": "key",
          "value": "value"
        }],
        "httpBody": null
      }],
      "text": {
        "text": ""
      }
    }
  }],
  "moduleResolvers": [{
    "resolverInfo": {
        "resolverName": "VIDSTREAMING",
        "nameMatches": ["ASIANEMBED", "VIDSTREAMING_BROKEN"],
        "developer": "Uknown",
        "moduleID": "56464964116",
        "resolverVersion": 1.0,
        "baseURL": ""
    },
    "resolver": [{
        "request": {
            "url": "empty",
            "method": "get",
            "headers": [{
                "key": "key",
                "value": "value"
            }],
            "httpBody": null
        },
        "extra": {
            "commands": [{
                "commandName": "",
                "params": [{
                    "key": "",
                    "value": ""
                }]
            }],
            "extraInfo": [{
                "key": "",
                "value": ""
            }]
        },
        "javascriptConfig": {
            "removeJavascript": false,
            "loadInWebView": false,
            "javaScript": "function Resolver(request, extra, javascriptConfig, output) { this.request = request; this.extra = extra; this.javascriptConfig = javascriptConfig; this.output = output;}function ModuleRequest(url, method, headers, httpBody) { this.url = url; this.method = method; this.headers = headers; this.httpBody = httpBody;}function Extra(commands, extraInfo) { this.commands = commands; this.extraInfo = extraInfo;}function Commands(commandName, params) { this.commandName = commandName; this.params = params;}function JavascriptConfig(removeJavascript, loadInWebView, javaScript) { this.removeJavascript = removeJavascript; this.loadInWebView = loadInWebView; this.javaScript = javaScript;}function KeyValue(key, value) { this.key = key; this.value = value;}function Output(video) { this.video = video;}function Video(videoQuality, videoLink) { this.videoQuality = videoQuality; this.videoLink = videoLink;}function getNext(match, array) { for (var x = 0; x < array.length; x++) { let mMatch = array[x]; if (mMatch.includes(match)) { return array[x + 1]; } }}var savedData = document.getElementById('ketsu-final-data');var parsedJson = JSON.parse(savedData.innerHTML);var emptyKeyValue = [new KeyValue('Referer', parsedJson.request.url)];var videos = [];var parsedJson = JSON.parse(savedData.innerHTML);var nextRequest = parsedJson.request.url + '&done=done';var found = false;var newFound = false;try { for (source of playerInstance.getPlaylist()) { for (vid of source.allSources) { let mviD = vid.file; let quality = vid.label; if (mviD != undefined && quality != undefined) { videos.push(new Video(quality, new ModuleRequest(mviD, 'get', emptyKeyValue, null))); newFound = true; } } }} catch { newFound = false;}if (newFound) { nextRequest = '';}for (var x = 0; x < videos.length; x++) { let video = videos[x]; if (video.videoQuality.includes('480')) { videos.unshift(videos.splice(x, 1)[0]); found = true; continue; } if (found && !video.videoQuality.includes('480')) { break; }} var found = false;for (var x = 0; x < videos.length; x++) { let video = videos[x]; if (video.videoQuality.includes('480')) { videos.unshift(videos.splice(x, 1)[0]); found = true; continue; } if (found && !video.videoQuality.includes('480')) { break; }} let emptyExtra = new Extra([new Commands('', emptyKeyValue)], emptyKeyValue);var chaptersObject = new Resolver(new ModuleRequest(nextRequest, 'get', emptyKeyValue, null), emptyExtra, new JavascriptConfig(true, false, ''), new Output(videos));var finalJson = JSON.stringify(chaptersObject);savedData.innerHTML = finalJson;"
        },
        "output": {
            "moduleID": "234234823",
            "video": [{
                "videoQuality": "720",
                "videoLink": {
                    "url": "http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4",
                    "method": "get",
                    "headers": [{
                        "key": "key",
                        "value": "value"
                    }],
                    "httpBody": null
                }
            }]
        }
    }, {
        "request": {
            "url": "empty",
            "method": "get",
            "headers": [{
                "key": "key",
                "value": "value"
            }],
            "httpBody": null
        },
        "extra": {
            "commands": [{
                "commandName": "",
                "params": [{
                    "key": "",
                    "value": ""
                }]
            }],
            "extraInfo": [{
                "key": "",
                "value": ""
            }]
        },
        "javascriptConfig": {
            "removeJavascript": true,
            "loadInWebView": false,
            "javaScript": "var script = document.createElement('script');script.src = 'https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js';document.head.appendChild(script);script.addEventListener('load', function () { function Resolver(request, extra, javascriptConfig, output) { this.request = request; this.extra = extra; this.javascriptConfig = javascriptConfig; this.output = output; } function ModuleRequest(url, method, headers, httpBody) { this.url = url; this.method = method; this.headers = headers; this.httpBody = httpBody; } function Extra(commands, extraInfo) { this.commands = commands; this.extraInfo = extraInfo; } function Commands(commandName, params) { this.commandName = commandName; this.params = params; } function JavascriptConfig(removeJavascript, loadInWebView, javaScript) { this.removeJavascript = removeJavascript; this.loadInWebView = loadInWebView; this.javaScript = javaScript; } function KeyValue(key, value) { this.key = key; this.value = value; } function Output(video) { this.video = video; } function Video(videoQuality, videoLink) { this.videoQuality = videoQuality; this.videoLink = videoLink; } var savedData = document.getElementById('ketsu-final-data'); var parsedJson = JSON.parse(savedData.innerHTML); var emptyKeyValue = [ new KeyValue('Referer', parsedJson.request.url), new KeyValue('X-Requested-With', 'XMLHttpRequest') ]; var emptyExtra = new Extra([new Commands('', emptyKeyValue)], emptyKeyValue); var newRequest = new ModuleRequest('', '', emptyKeyValue, null); var parseUrl = new URL(parsedJson.request.url); var key = '93422192433952489752342908585752'; var IV = '9262859232435825'; var cryptoToken = document.querySelector('p[data-name=crypto]').getAttribute('data-value'); var decryptedData = CryptoJS.AES.decrypt(cryptoToken, CryptoJS.enc.Utf8.parse(key), { 'iv': CryptoJS.enc.Utf8.parse(IV) }); decryptedData = CryptoJS.enc.Utf8.stringify(decryptedData); var id = decryptedData.substr(0, decryptedData.indexOf('&')); id = CryptoJS.AES.encrypt(id, CryptoJS.enc.Utf8.parse(key), { 'iv': CryptoJS.enc.Utf8.parse(IV) }).toString(); let rest = decryptedData.substr(decryptedData.indexOf('&')); newRequest = new ModuleRequest(`${parseUrl.origin}/encrypt-ajax.php?id=${id + rest}`, 'get', emptyKeyValue, null); var chaptersObject = new Resolver(newRequest, emptyExtra, new JavascriptConfig(false, false, ''), new Output([])); var finalJson = JSON.stringify(chaptersObject); savedData.innerHTML = finalJson;});"
        },
        "output": {
            "moduleID": "234234823",
            "video": [{
                "videoQuality": "720",
                "videoLink": {
                    "url": "http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4",
                    "method": "get",
                    "headers": [{
                        "key": "key",
                        "value": "value"
                    }],
                    "httpBody": null
                }
            }]
        }
    }, {
        "request": {
            "url": "empty",
            "method": "get",
            "headers": [{
                "key": "key",
                "value": "value"
            }],
            "httpBody": null
        },
        "extra": {
            "commands": [{
                "commandName": "",
                "params": [{
                    "key": "",
                    "value": ""
                }]
            }],
            "extraInfo": [{
                "key": "",
                "value": ""
            }]
        },
        "javascriptConfig": {
            "removeJavascript": true,
            "loadInWebView": false,
            "javaScript": "var script = document.createElement('script');script.src = 'https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js';document.head.appendChild(script);script.addEventListener('load', function () { function Resolver(request, extra, javascriptConfig, output) { this.request = request; this.extra = extra; this.javascriptConfig = javascriptConfig; this.output = output; } function ModuleRequest(url, method, headers, httpBody) { this.url = url; this.method = method; this.headers = headers; this.httpBody = httpBody; } function Extra(commands, extraInfo) { this.commands = commands; this.extraInfo = extraInfo; } function Commands(commandName, params) { this.commandName = commandName; this.params = params; } function JavascriptConfig(removeJavascript, loadInWebView, javaScript) { this.removeJavascript = removeJavascript; this.loadInWebView = loadInWebView; this.javaScript = javaScript; } function KeyValue(key, value) { this.key = key; this.value = value; } function Output(video) { this.video = video; } function Video(videoQuality, videoLink) { this.videoQuality = videoQuality; this.videoLink = videoLink; } var savedData = document.getElementById('ketsu-final-data'); var parsedJson = JSON.parse(savedData.innerHTML); var emptyKeyValue = [ new KeyValue('Referer', parsedJson.request.url) ]; var emptyExtra = new Extra([new Commands('', emptyKeyValue)], emptyKeyValue); var videos = []; var key = '93422192433952489752342908585752'; var IV = '9262859232435825'; var script = document.querySelector('script:nth-child(2)'); var parsedData = JSON.parse(script.innerHTML.replace('/*', '').replace('*/', '')); var decryptedData = CryptoJS.AES.decrypt(parsedData.data, CryptoJS.enc.Utf8.parse(key), { 'iv': CryptoJS.enc.Utf8.parse(IV) }); decryptedData = CryptoJS.enc.Utf8.stringify(decryptedData); decryptedData = JSON.parse(decryptedData); for (const source of decryptedData.source) { videos.push(new Video(`${source.label.replace(' ', '').toLowerCase()} | ${source.type}`, new ModuleRequest(source.file, 'get', emptyKeyValue))); } for (const source of decryptedData.source_bk) { videos.push(new Video(`${source.label.replace(' ', '').toLowerCase()} | ${source.type}`, new ModuleRequest(source.file, 'get', emptyKeyValue))); } var found = false;for (var x = 0; x < videos.length; x++) { let video = videos[x]; if (video.videoQuality.includes('480')) { videos.unshift(videos.splice(x, 1)[0]); found = true; continue; } if (found && !video.videoQuality.includes('480')) { break; }}  var chaptersObject = new Resolver(new ModuleRequest('', '', emptyKeyValue, null), emptyExtra, new JavascriptConfig(false, false, ''), new Output(videos)); var finalJson = JSON.stringify(chaptersObject); savedData.innerHTML = finalJson;});"
        },
        "output": {
            "moduleID": "234234823",
            "video": [{
                "videoQuality": "720",
                "videoLink": {
                    "url": "http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4",
                    "method": "get",
                    "headers": [{
                        "key": "key",
                        "value": "value"
                    }],
                    "httpBody": null
                }
            }]
        }
    }]
}],
  "responseCodeFunctions": [{
    "code": 0,
    "msgTitle": "",
    "msgBody": "",
    "type": "normal",
    "functions": [{
      "request": {
        "url": "empty",
        "method": "get",
        "headers": [{
          "key": "key",
          "value": "value"
        }],
        "httpBody": null
      },
      "extra": {
        "commands": [{
          "commandName": "",
          "params": [{
            "key": "",
            "value": ""
          }]
        }],
        "extraInfo": [{
          "key": "",
          "value": ""
        }]
      },
      "javascriptConfig": {
        "removeJavascript": true,
        "loadInWebView": false,
        "javaScript": ""
      }
    }]
  }],
  "helperFunctions": [{
    "functionName": "example",
    "msgTitle": "",
    "msgBody": "",
    "type": "normal",
    "functions": [{
      "request": {
        "url": "empty",
        "method": "get",
        "headers": [{
          "key": "key",
          "value": "value"
        }],
        "httpBody": null
      },
      "extra": {
        "commands": [{
          "commandName": "",
          "params": [{
            "key": "",
            "value": ""
          }]
        }],
        "extraInfo": [{
          "key": "",
          "value": ""
        }]
      },
      "javascriptConfig": {
        "removeJavascript": true,
        "loadInWebView": false,
        "javaScript": ""
      }
    }]
  }]
}